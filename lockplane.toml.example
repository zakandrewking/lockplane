# Lockplane Configuration File
#
# Define named environments and shared settings for your project. Lockplane looks for
# this file (lockplane.toml) in the current directory or any parent directory. Each
# environment can inline database URLs here or load them from matching .env.<name> files.
#
# Priority order (highest to lowest):
#   1. CLI flags (--target, --target-environment, --from, --from-environment, etc.)
#   2. Named environments from this file (including .env.<name> overlays)
#   3. Built-in defaults (local Postgres on ports 5432/5433)

# Name of the environment to use when no flag is provided.
default_environment = "local"

# Default schema path used when --schema is omitted in plan/apply commands.
# This can point to a directory of .lp.sql files or a single schema file.
# schema_path = "lockplane/schema/"

[environments.local]
description = "Local development using the default docker-compose databases"
database_url = "postgres://lockplane:lockplane@localhost:5432/lockplane?sslmode=disable"
shadow_database_url = "postgres://lockplane:lockplane@localhost:5433/lockplane_shadow?sslmode=disable"

# Example: defer secrets to .env.staging while keeping metadata here.
[environments.staging]
description = "Managed staging database (credentials in .env.staging)"
# When database_url / shadow_database_url are omitted, Lockplane reads them from .env.staging:
#   DATABASE_URL=postgres://user:password@staging-host:5432/app?sslmode=require
#   SHADOW_DATABASE_URL=postgres://user:password@staging-host:5433/app_shadow?sslmode=require

# Example SQLite environment (inline URL only, no .env file needed):
#[environments.sqlite]
#description = "Local SQLite prototype"
#database_url = "sqlite://./myapp.db"
#shadow_database_url = "sqlite://./myapp_shadow.db"
