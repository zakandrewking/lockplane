# Lockplane Configuration File
#
# Define named environments and shared settings for your project. Lockplane looks for
# lockplane.toml in the current directory, any parent directory, or a schema/ subdirectory.
# Each environment can inline database URLs here or load them from matching .env.<name> files.
#
# Priority order (highest to lowest):
#   1. CLI flags (--target, --target-environment, --from, --from-environment, etc.)
#   2. Named environments from this file (including .env.<name> overlays)
#   3. Built-in defaults (local Postgres on ports 5432/5433)

# Name of the environment to use when no flag is provided.
default_environment = "local"

# Default schema path used when --schema is omitted in plan/apply commands.
# When this file lives inside schema/, set the path to "." so it points at the
# directory containing your .lp.sql files. Uncomment to override globally.
# schema_path = "."

[environments.local]
description = "Local development using the default docker-compose databases"
database_url = "postgres://lockplane:lockplane@localhost:5432/lockplane?sslmode=disable"
shadow_database_url = "postgres://lockplane:lockplane@localhost:5433/lockplane_shadow?sslmode=disable"

# Example: defer secrets to .env.staging while keeping metadata here.
[environments.staging]
description = "Managed staging database (credentials in .env.staging)"
# When database_url / shadow_database_url are omitted, Lockplane reads them from .env.staging:
#   DATABASE_URL=postgres://user:password@staging-host:5432/app?sslmode=require
#   SHADOW_DATABASE_URL=postgres://user:password@staging-host:5433/app_shadow?sslmode=require

# Example SQLite environment (inline URL only, no .env file needed):
#[environments.sqlite]
#description = "Local SQLite prototype"
#database_url = "sqlite://./myapp.db"
#shadow_database_url = "sqlite://./myapp_shadow.db"

# Example Turso environment (credentials in .env.turso):
#[environments.turso]
#description = "Turso distributed SQLite (credentials in .env.turso)"
# .env.turso should contain:
#   DATABASE_URL=libsql://mydb-user.turso.io?authToken=eyJhbGc...
#   SHADOW_DATABASE_URL=libsql://mydb-shadow-user.turso.io?authToken=eyJhbGc...
